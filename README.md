# Blog-Management Backend

Backend system for managing Blogs, built using FastAPI and MongoDB.

### Features
* Dockerized
* Tests included
* Utilized Dependency injection
* Utilized background tasks for creating notifications
* deployed on render: [Blog-Management](https://blog-backend-d27b.onrender.com)

## Requirements

##### For running the script

**NOTE**: I have deployed Celery which seemed a better solution instead of Django signals. <br />
You can either install Docker for hassle-free setup, or install  Redis for conventional setup.


- [Python](https://www.python.org/downloads/)
- [Docker](https://docs.docker.com/get-docker/)


## Clone

* Use `git clone` to clone the repo
```bash
git clone git@github.com:FumaxIN/Blog_Backend.git
```

## Run

### Docker
```bash
docker build -t app .
docker run -p 8000:8000 app
```

To run the tests in Docker setup, keep the container running and run the following commands in a new terminal:
```bash
 docker exec -it <CONTAINER ID> bash
 pytest
```
(`Container ID` can be found using `docker ps`)

### Conventional Setup

* Create a virtual environment
```bash
python -m venv ./venv
source ./venv/bin/activate
```

* Install the requirements
```bash
  pip install -r requirements.txt
```
* Run tests
```bash
pytest
```
* Run server and start celery in a new terminal
```bash
uvicorn main:app --reload
```



## Swagger-Doc for authorization

**Note**: Authorize via swaggerUI to tests from the swagger page. Create a new user from the endpoint below or use:<br />
`username`: fumax <br />
`password`: qwerty@123 <br />
You can use tokens generated by auth endpoints to test via postman.

### Auth Endpoints:
* **Registration for a new user**
    ```
    POST: /api/auth/register
    ```
    Request body:
    ```
    {
      "email": "johndoe@gmail.com",
      "first_name": "John",
      "last_name": "Doe",
      "password": "password",
      "username": "johndoe"
    }
    ```
  An `access` token will be returned.

* **Login for existing user**
    ```
    POST: /login
    ```
   Request body:
    ```
    {
        "username": "fumax",
        "password": "qwerty@123"
    }
    ```
   An `access` token will be returned.
